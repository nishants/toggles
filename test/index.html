<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body ng-app="feature-toggle" ng-controller="root">

<div>
    <label>Environment : </label>
    <label ng-bind="toggles.features.env"></label>
</div>
<div>
    <label>Features : </label>
    <div ng-bind="toggles | jsonfied"></div>
</div>

<div feature="espp">
    You cant see me.
</div>


<script src="../support/angular1.5.8.min.js"></script>
<script src="../lib/toggles.js"></script>
<script>
    var app = angular.module("feature-toggle", ["toggles"]);
    app.run(['$http', 'toggles', function ($http, toggles) {
        toggles.init($http.get("config/features.json"));
    }]);

    app.controller("root", ["$scope","toggles",function($scope, toggles){
        toggles.getConfig().then(function(features){
            $scope.toggles = {features: features};
            window.toggles = {features: features};
        });
    }]);

    app.filter("jsonfied", [function(){
        return function(json){
            return JSON.stringify(json);
        };
    }]);

</script>
</body>
</html>